generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Subscription {
  id                    String          @id @default(cuid())
  name                  String
  category              String
  cost                  Float
  billingCycle          String
  normalizedMonthlyCost Float
  status                String          @default("active")
  startDate             String
  trialEndDate          String?
  cancellationDate      String?
  lastActiveDate        String?
  createdAt             DateTime        @default(now())
  updatedAt             DateTime        @updatedAt
  statusHistory         StatusHistory[]
}

model StatusHistory {
  id             String       @id @default(cuid())
  subscriptionId String
  fromStatus     String
  toStatus       String
  changedAt      DateTime     @default(now())
  subscription   Subscription @relation(fields: [subscriptionId], references: [id], onDelete: Cascade)
}
